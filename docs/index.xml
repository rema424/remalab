<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>RemaLab</title><link>https://rema424.github.io/remalab/</link><description>RemaLab</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><lastBuildDate>Sat, 31 Oct 2020 16:03:00 +0900</lastBuildDate><atom:link href="https://rema424.github.io/remalab/index.xml" rel="self" type="application/rss+xml"/><item><title>Hugo と GitHub Pages で技術ブログ</title><link>https://rema424.github.io/remalab/hugo/start/</link><pubDate>Sat, 31 Oct 2020 16:03:00 +0900</pubDate><guid>https://rema424.github.io/remalab/hugo/start/</guid><description>&lt;h2 id="toc">TOC&lt;/h2>
&lt;ul>
&lt;li>Getting Started&lt;/li>
&lt;li>Host on GitHub&lt;/li>
&lt;li>Google Analytics&lt;/li>
&lt;li>Google Search Console&lt;/li>
&lt;li>Privacy Policy&lt;/li>
&lt;/ul>
&lt;h2 id="getting-started">Getting Started&lt;/h2>
&lt;h3 id="インストール">インストール&lt;/h3>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#75715e"># インストール&lt;/span>
brew install hugo
&lt;span style="color:#75715e"># バージョン確認&lt;/span>
hugo version
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="プロジェクト作成">プロジェクト作成&lt;/h3>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">hugo new site &amp;lt;your-project-name&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="テーマの設定">テーマの設定&lt;/h3>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#75715e"># ディレクトリ移動&lt;/span>
cd &amp;lt;your-project-name&amp;gt;
&lt;span style="color:#75715e"># git 初期化&lt;/span>
git init
&lt;span style="color:#75715e"># テーマの追加（今回は Anubis を使用）&lt;/span>
git submodule add https://github.com/mitrichius/hugo-theme-anubis.git themes/anubis
&lt;span style="color:#75715e"># 設定ファイルにテーマを追加&lt;/span>
echo &lt;span style="color:#e6db74">&amp;#39;theme = &amp;#34;anubis&amp;#34;&amp;#39;&lt;/span> &amp;gt;&amp;gt; config.toml
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="記事の作成">記事の作成&lt;/h3>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">hugo new &amp;lt;section&amp;gt;/&amp;lt;article-title&amp;gt;.md
&lt;span style="color:#75715e"># =&amp;gt; content/&amp;lt;section&amp;gt;/&amp;lt;argicle-title&amp;gt;.md が生成される&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ローカルサーバーの起動">ローカルサーバーの起動&lt;/h3>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#75715e"># サーバー起動（ドラフトも表示）&lt;/span>
hugo server -D
&lt;span style="color:#75715e"># ブラウザで表示&lt;/span>
open http://localhost:1313
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="設定ファイルの編集">設定ファイルの編集&lt;/h3>
&lt;p>お好みですが、&lt;code>toml&lt;/code> から &lt;code>yaml&lt;/code> に変更します。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">mv config.toml config.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;p>中身を編集します。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#75715e"># config.yaml&lt;/span>
&lt;span style="color:#f92672">baseURL&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;http://example.org/&amp;#34;&lt;/span>
&lt;span style="color:#f92672">languageCode&lt;/span>: &lt;span style="color:#ae81ff">ja-jp&lt;/span>
&lt;span style="color:#f92672">title&lt;/span>: &lt;span style="color:#ae81ff">RemaLab&lt;/span>
&lt;span style="color:#f92672">theme&lt;/span>: &lt;span style="color:#ae81ff">anubis&lt;/span>
&lt;span style="color:#f92672">publishDir&lt;/span>: &lt;span style="color:#ae81ff">docs&lt;/span>
&lt;span style="color:#f92672">enableRobotsTXT&lt;/span>: &lt;span style="color:#66d9ef">true&lt;/span>
&lt;span style="color:#f92672">hasCJKLanguage&lt;/span>: &lt;span style="color:#66d9ef">true&lt;/span>
&lt;span style="color:#f92672">summaryLength&lt;/span>: &lt;span style="color:#ae81ff">100&lt;/span>
&lt;span style="color:#f92672">params&lt;/span>:
&lt;span style="color:#f92672">author&lt;/span>: &lt;span style="color:#ae81ff">rema&lt;/span>
&lt;span style="color:#f92672">description&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>
&lt;span style="color:#f92672">readMore&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ビルド">ビルド&lt;/h3>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#75715e"># ドラフトも含める場合&lt;/span>
hugo -D
&lt;span style="color:#75715e"># ドラフトを含めない場合&lt;/span>
hugo
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="host-on-github">Host on GitHub&lt;/h2>
&lt;h3 id="リモートリポジトリの作成">リモートリポジトリの作成&lt;/h3>
&lt;p>GitHub で新規プロジェクトを作成します（今回は remalab で作成）。&lt;/p>
&lt;p>リモートリポジトリが作成できたら push します。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#75715e"># 変更をステージ&lt;/span>
git add .
&lt;span style="color:#75715e"># コミット&lt;/span>
git commit -m &lt;span style="color:#e6db74">&amp;#34;first commit&amp;#34;&lt;/span>
&lt;span style="color:#75715e"># リモートリポジトリの追加&lt;/span>
git remote add origin https://github.com/rema424/remalab.git
&lt;span style="color:#75715e"># ブランチの切替&lt;/span>
git branch -M main
&lt;span style="color:#75715e"># puch&lt;/span>
git push -u origin main
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="設定ファイルの編集-1">設定ファイルの編集&lt;/h3>
&lt;p>GitHub Pages には &lt;strong>User/Organization Pages&lt;/strong> と &lt;strong>Project Pages&lt;/strong> の 2 タイプがあります。&lt;/p>
&lt;p>今回は &lt;strong>Project Pages&lt;/strong> を採用します。(&lt;code>https://&amp;lt;username&amp;gt;.github.io/&amp;lt;project&amp;gt;/&lt;/code>)&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#75715e"># config.yaml&lt;/span>
&lt;span style="color:#f92672">baseURL&lt;/span>: &lt;span style="color:#ae81ff">https://rema424.github.io/remalab/&lt;/span>
&lt;span style="color:#f92672">publishDir&lt;/span>: &lt;span style="color:#ae81ff">docs&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="github-の設定変更">GitHub の設定変更&lt;/h3>
&lt;p>GitHub &amp;gt; Project &amp;gt; Settings &amp;gt; GitHub Pages より設定を変更します。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#f92672">Source&lt;/span>:
&lt;span style="color:#f92672">branch&lt;/span>: &lt;span style="color:#ae81ff">main&lt;/span>
&lt;span style="color:#f92672">folder&lt;/span>: &lt;span style="color:#ae81ff">/docs&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ローカルサーバーの起動-1">ローカルサーバーの起動&lt;/h3>
&lt;p>設定を変更したため、一度ローカルで確認します。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#75715e"># サーバー起動（ドラフトも表示）&lt;/span>
hugo server -D
&lt;span style="color:#75715e"># =&amp;gt; 設定変更により TOP が localhost:1313/ から localhost:1313/remalab/ へ&lt;/span>
&lt;span style="color:#75715e"># ブラウザで表示&lt;/span>
open http://localhost:1313/remalab/
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="再ビルド">再ビルド&lt;/h3>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#75715e"># 既存のビルド先ディレクトリを削除&lt;/span>
rm -r public
&lt;span style="color:#75715e"># ビルド（テストのためドラフトも含む）&lt;/span>
hugo -D
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="デプロイ">デプロイ&lt;/h3>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">git add .
git commit -m &lt;span style="color:#e6db74">&amp;#34;first deploy&amp;#34;&lt;/span>
git push
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="確認">確認&lt;/h3>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">open https://rema424.github.io/remalab/
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="google-analytics">Google Analytics&lt;/h2>
&lt;h3 id="google-analytics-プロパティの作成">Google Analytics プロパティの作成&lt;/h3>
&lt;p>Google Analytics アカウントを未所持の場合は作成します。&lt;/p>
&lt;p>アカウントが準備できたらプロパティを作成します。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yml" data-lang="yml">&lt;span style="color:#f92672">プロパティ名&lt;/span>: &lt;span style="color:#ae81ff">remalab&lt;/span>
&lt;span style="color:#f92672">レポートのタイムゾーン&lt;/span>: &lt;span style="color:#ae81ff">日本&lt;/span>
&lt;span style="color:#f92672">通貨&lt;/span>: &lt;span style="color:#ae81ff">日本円&lt;/span>
&lt;span style="color:#f92672">業種&lt;/span>: &lt;span style="color:#ae81ff">Computers &amp;amp; Electronics&lt;/span>
&lt;span style="color:#f92672">ビジネスの規模&lt;/span>: &lt;span style="color:#ae81ff">小規模&lt;/span>
&lt;span style="color:#f92672">利用目的&lt;/span>: &lt;span style="color:#ae81ff">サイトまたはアプリでの顧客エンゲージメントを測定する&lt;/span>
&lt;span style="color:#f92672">Choose a platform&lt;/span>: &lt;span style="color:#ae81ff">ウェブ&lt;/span>
&lt;span style="color:#f92672">ウェブサイトのURL&lt;/span>: &lt;span style="color:#ae81ff">https://rema424.github.io/remalab/&lt;/span>
&lt;span style="color:#f92672">ストリーム名&lt;/span>: &lt;span style="color:#ae81ff">RemaLab&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>プロパティが作成できたら、[管理] &amp;gt; [プロパティ] &amp;gt; [データ設定] &amp;gt; [データ保持] からイベントデータ保持を14か月に変更しておきます。&lt;/p>
&lt;h3 id="google-tag-manager-コンテナの作成">Google Tag Manager コンテナの作成&lt;/h3>
&lt;p>Google Tag Manager アカウントを未所持の場合は作成します。&lt;/p>
&lt;p>アカウントが準備できたらコンテナを作成します。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yml" data-lang="yml">&lt;span style="color:#f92672">コンテナ名&lt;/span>: &lt;span style="color:#ae81ff">remalab&lt;/span>
&lt;span style="color:#f92672">ターゲットプラットフォーム&lt;/span>: &lt;span style="color:#ae81ff">ウェブ&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>コンテナを作成すると &lt;code>&amp;lt;head&amp;gt;&lt;/code> と &lt;code>&amp;lt;body&amp;gt;&lt;/code> に設置するスニペットが表示されるので控えておきます。（後で GTM ダッシュボード上で確認することもできます。）&lt;/p>
&lt;h3 id="パーシャルの作成">パーシャルの作成&lt;/h3>
&lt;p>GTM スニペットを設置するためのファイルを作成していきます。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#75715e"># ディレクトリの作成&lt;/span>
mkdir -p layouts/partials/gtm/
&lt;span style="color:#75715e"># ファイル作成&lt;/span>
touch layouts/partials/gtm/head.html layouts/partials/gtm/body.html
&lt;/code>&lt;/pre>&lt;/div>&lt;p>それぞれのファイルに控えておいた GTM スニペットを記載して保存します。&lt;/p>
&lt;p>環境変数が &lt;code>production&lt;/code> の場合のみ、script を出力するようにします。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-html" data-lang="html">&lt;span style="color:#75715e">&amp;lt;!-- layouts/partials/gtm/head.html --&amp;gt;&lt;/span>
{{ if eq (getenv &amp;#34;HUGO_ENV&amp;#34;) &amp;#34;production&amp;#34; | or (eq .Site.Params.env &amp;#34;production&amp;#34;) }}
&lt;span style="color:#75715e">&amp;lt;!-- Google Tag Manager --&amp;gt;&lt;/span>
&amp;lt;&lt;span style="color:#f92672">script&lt;/span>&amp;gt;(&lt;span style="color:#66d9ef">function&lt;/span>(&lt;span style="color:#a6e22e">w&lt;/span>,&lt;span style="color:#a6e22e">d&lt;/span>,&lt;span style="color:#a6e22e">s&lt;/span>,&lt;span style="color:#a6e22e">l&lt;/span>,&lt;span style="color:#a6e22e">i&lt;/span>){&lt;span style="color:#a6e22e">w&lt;/span>[&lt;span style="color:#a6e22e">l&lt;/span>]&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#a6e22e">w&lt;/span>[&lt;span style="color:#a6e22e">l&lt;/span>]&lt;span style="color:#f92672">||&lt;/span>[];&lt;span style="color:#a6e22e">w&lt;/span>[&lt;span style="color:#a6e22e">l&lt;/span>].&lt;span style="color:#a6e22e">push&lt;/span>({&lt;span style="color:#e6db74">&amp;#39;gtm.start&amp;#39;&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;span style="color:#66d9ef">new&lt;/span> Date().&lt;span style="color:#a6e22e">getTime&lt;/span>(),&lt;span style="color:#a6e22e">event&lt;/span>&lt;span style="color:#f92672">:&lt;/span>&lt;span style="color:#e6db74">&amp;#39;gtm.js&amp;#39;&lt;/span>});&lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">f&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#a6e22e">d&lt;/span>.&lt;span style="color:#a6e22e">getElementsByTagName&lt;/span>(&lt;span style="color:#a6e22e">s&lt;/span>)[&lt;span style="color:#ae81ff">0&lt;/span>],
&lt;span style="color:#a6e22e">j&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#a6e22e">d&lt;/span>.&lt;span style="color:#a6e22e">createElement&lt;/span>(&lt;span style="color:#a6e22e">s&lt;/span>),&lt;span style="color:#a6e22e">dl&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#a6e22e">l&lt;/span>&lt;span style="color:#f92672">!=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;dataLayer&amp;#39;&lt;/span>&lt;span style="color:#f92672">?&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&amp;amp;l=&amp;#39;&lt;/span>&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#a6e22e">l&lt;/span>&lt;span style="color:#f92672">:&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>;&lt;span style="color:#a6e22e">j&lt;/span>.&lt;span style="color:#66d9ef">async&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">true&lt;/span>;&lt;span style="color:#a6e22e">j&lt;/span>.&lt;span style="color:#a6e22e">src&lt;/span>&lt;span style="color:#f92672">=&lt;/span>
&lt;span style="color:#e6db74">&amp;#39;https://www.googletagmanager.com/gtm.js?id=&amp;#39;&lt;/span>&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#a6e22e">i&lt;/span>&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#a6e22e">dl&lt;/span>;&lt;span style="color:#a6e22e">f&lt;/span>.&lt;span style="color:#a6e22e">parentNode&lt;/span>.&lt;span style="color:#a6e22e">insertBefore&lt;/span>(&lt;span style="color:#a6e22e">j&lt;/span>,&lt;span style="color:#a6e22e">f&lt;/span>);
})(window,document,&lt;span style="color:#e6db74">&amp;#39;script&amp;#39;&lt;/span>,&lt;span style="color:#e6db74">&amp;#39;dataLayer&amp;#39;&lt;/span>,&lt;span style="color:#e6db74">&amp;#39;&amp;lt;your-container-id&amp;gt;&amp;#39;&lt;/span>);&amp;lt;/&lt;span style="color:#f92672">script&lt;/span>&amp;gt;
&lt;span style="color:#75715e">&amp;lt;!-- End Google Tag Manager --&amp;gt;&lt;/span>
{{ end }}
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-html" data-lang="html">&lt;span style="color:#75715e">&amp;lt;!-- layouts/partials/gtm/body.html --&amp;gt;&lt;/span>
{{ if eq (getenv &amp;#34;HUGO_ENV&amp;#34;) &amp;#34;production&amp;#34; | or (eq .Site.Params.env &amp;#34;production&amp;#34;) }}
&lt;span style="color:#75715e">&amp;lt;!-- Google Tag Manager (noscript) --&amp;gt;&lt;/span>
&amp;lt;&lt;span style="color:#f92672">noscript&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#f92672">iframe&lt;/span> &lt;span style="color:#a6e22e">src&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;https://www.googletagmanager.com/ns.html?id=&amp;lt;your-container-id&amp;gt;&amp;#34;&lt;/span>
&lt;span style="color:#a6e22e">height&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;0&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">width&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;0&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">style&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;display:none;visibility:hidden&amp;#34;&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#f92672">iframe&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#f92672">noscript&lt;/span>&amp;gt;
&lt;span style="color:#75715e">&amp;lt;!-- End Google Tag Manager (noscript) --&amp;gt;&lt;/span>
{{ end }}
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="パーシャルの読み込み">パーシャルの読み込み&lt;/h3>
&lt;p>テーマをカスタマイズしてGTMスニペットを配置していきます。&lt;/p>
&lt;p>まずはベースファイルをテーマからプロジェクト側にコピーします。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">&lt;span style="color:#75715e"># ディレクトリ作成&lt;/span>
mkdir layouts/_default/
&lt;span style="color:#75715e"># ファイルコピー&lt;/span>
cp themes/anubis/layouts/_default/baseof.html layouts/_default/baseof.html
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ファイルがコピーできたら中身を編集します。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-html" data-lang="html">&lt;span style="color:#75715e">&amp;lt;!-- layouts/_default/baseof.html --&amp;gt;&lt;/span>
&lt;span style="color:#75715e">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
{{ $dataTheme := &amp;#34;&amp;#34; }}
{{ if eq site.Params.style &amp;#34;dark-without-switcher&amp;#34; }}
{{ $dataTheme = &amp;#34;dark&amp;#34; }}
{{ end }}
&amp;lt;&lt;span style="color:#f92672">html&lt;/span> &lt;span style="color:#a6e22e">lang&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;{{ .Site.LanguageCode }}&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">data-theme&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;{{ $dataTheme }}&amp;#34;&lt;/span>&amp;gt;
&amp;lt;&lt;span style="color:#f92672">head&lt;/span>&amp;gt;
{{ partial &amp;#34;gtm/head.html&amp;#34; . }} &lt;span style="color:#75715e">&amp;lt;!-- この行を追加 --&amp;gt;&lt;/span>
{{ block &amp;#34;head&amp;#34; . }}
{{ partial &amp;#34;head.html&amp;#34; . }}
{{ end }}
&amp;lt;/&lt;span style="color:#f92672">head&lt;/span>&amp;gt;
&amp;lt;&lt;span style="color:#f92672">body&lt;/span>&amp;gt;
{{ partial &amp;#34;gtm/body.html&amp;#34; . }} &lt;span style="color:#75715e">&amp;lt;!-- この行を追加 --&amp;gt;&lt;/span>
&amp;lt;&lt;span style="color:#f92672">a&lt;/span> &lt;span style="color:#a6e22e">class&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;skip-main&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">href&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;#main&amp;#34;&lt;/span>&amp;gt;{{ i18n &amp;#34;skipToContent&amp;#34; | humanize }}&amp;lt;/&lt;span style="color:#f92672">a&lt;/span>&amp;gt;
&amp;lt;&lt;span style="color:#f92672">div&lt;/span> &lt;span style="color:#a6e22e">class&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;container&amp;#34;&lt;/span>&amp;gt;
&amp;lt;&lt;span style="color:#f92672">header&lt;/span> &lt;span style="color:#a6e22e">class&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;common-header&amp;#34;&lt;/span>&amp;gt;
{{ block &amp;#34;header&amp;#34; . }}
{{ partial &amp;#34;header.html&amp;#34; . }}
{{ end }}
&amp;lt;/&lt;span style="color:#f92672">header&lt;/span>&amp;gt;
&amp;lt;&lt;span style="color:#f92672">main&lt;/span> &lt;span style="color:#a6e22e">id&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;main&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">tabindex&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;-1&amp;#34;&lt;/span>&amp;gt;
{{ block &amp;#34;main&amp;#34; . }}{{ end }}
&amp;lt;/&lt;span style="color:#f92672">main&lt;/span>&amp;gt;
{{ block &amp;#34;footer&amp;#34; . }}
{{ partial &amp;#34;footer.html&amp;#34; . }}
{{ end }}
&amp;lt;/&lt;span style="color:#f92672">div&lt;/span>&amp;gt;
&amp;lt;/&lt;span style="color:#f92672">body&lt;/span>&amp;gt;
&amp;lt;/&lt;span style="color:#f92672">html&lt;/span>&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="確認-1">確認&lt;/h3>
&lt;p>本番モードでローカルサーバーを起動してアクセスし、開発者ツールでスニペットが配置されているか確認します。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">HUGO_ENV&lt;span style="color:#f92672">=&lt;/span>production hugo server -D
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="gtm-の設定">GTM の設定&lt;/h3>
&lt;p>Google Tag Manager のダッシュボードから変数の設定、タグの作成、公開を行います。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#f92672">Google Tab Manager&lt;/span>:
&lt;span style="color:#f92672">コンテナ&lt;/span>:
&lt;span style="color:#f92672">変数&lt;/span>:
&lt;span style="color:#f92672">ユーザー定義変数&lt;/span>:
- &lt;span style="color:#f92672">新規&lt;/span>:
&lt;span style="color:#f92672">変数名&lt;/span>: &lt;span style="color:#ae81ff">GA&lt;/span>
&lt;span style="color:#f92672">変数の設定&lt;/span>:
&lt;span style="color:#f92672">変数のタイプ&lt;/span>: &lt;span style="color:#ae81ff">定数&lt;/span>
&lt;span style="color:#f92672">値&lt;/span>: &lt;span style="color:#ae81ff">&amp;lt;Google Analyticsの測定ID&amp;gt;&lt;/span>
&lt;span style="color:#f92672">タグ&lt;/span>:
&lt;span style="color:#f92672">新規&lt;/span>:
- &lt;span style="color:#f92672">タグ名&lt;/span>: &lt;span style="color:#ae81ff">Google アナリティクス GA4 設定&lt;/span>
&lt;span style="color:#f92672">タグの設定&lt;/span>:
&lt;span style="color:#f92672">タグタイプ&lt;/span>: &lt;span style="color:#ae81ff">Googleアナリティクス:GA4設定&lt;/span>
&lt;span style="color:#f92672">測定ID&lt;/span>: {{&lt;span style="color:#ae81ff">GA}}&lt;/span>
&lt;span style="color:#f92672">トリガー&lt;/span>: &lt;span style="color:#ae81ff">All Pages&lt;/span>
&lt;span style="color:#f92672">公開&lt;/span>:
&lt;span style="color:#f92672">送信設定&lt;/span>: &lt;span style="color:#ae81ff">バージョンの公開と作成&lt;/span>
&lt;span style="color:#f92672">バージョン名&lt;/span>: &lt;span style="color:#ae81ff">GA4の設定追加&lt;/span>
&lt;span style="color:#f92672">バージョンの説明&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>
&lt;span style="color:#f92672">環境への公開&lt;/span>: &lt;span style="color:#ae81ff">Live&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="確認-2">確認&lt;/h3>
&lt;p>本番モードでローカルサーバーを起動してアクセスし、&lt;code>&amp;lt;head&amp;gt;&lt;/code> 内に gtag があることを確認します。&lt;/p>
&lt;pre>&lt;code>&amp;lt;script type=&amp;quot;text/javascript&amp;quot; async=&amp;quot;&amp;quot; src=&amp;quot;http://www.googletagmanager.com/gtag/js?id=&amp;lt;測定ID&amp;gt;&amp;amp;l=dataLayer&amp;amp;cx=c&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
&lt;/code>&lt;/pre>&lt;p>次に Google Analytics のダッシュボードを開き、リアルタイムタブで自分のアクセスが計測されていることを確認します。&lt;/p>
&lt;h2 id="google-search-console">Google Search Console&lt;/h2>
&lt;h3 id="本番モードでデプロイ">本番モードでデプロイ&lt;/h3>
&lt;p>ウェブサイトの所有確認に Google Tag Manager を利用するためデプロイしておきます。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">HUGO_ENV&lt;span style="color:#f92672">=&lt;/span>production hugo
git add .
git commit -m &lt;span style="color:#e6db74">&amp;#34;add: ga&amp;#34;&lt;/span>
git push
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="プロパティの作成">プロパティの作成&lt;/h3>
&lt;p>&lt;a href="https://search.google.com/search-console">Google Search Console&lt;/a> にアクセスしてプロパティを作成します。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#f92672">プロパティタイプ&lt;/span>: &lt;span style="color:#ae81ff">URL プレフィックス&lt;/span>
&lt;span style="color:#f92672">URL&lt;/span>: &lt;span style="color:#ae81ff">https://rema424.github.io/remalab/&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="privacy-policy">Privacy Policy&lt;/h2>
&lt;p>&lt;a href="https://marketingplatform.google.com/about/analytics/terms/jp/">Google アナリティクスの利用規約&lt;/a>において、利用者には次の事項が求められています。&lt;/p>
&lt;ul>
&lt;li>プライバシーポリシーを公開すること&lt;/li>
&lt;li>データの収集に使われる技術について通知すること&lt;/li>
&lt;li>Google アナリティクスの使用を通知すること&lt;/li>
&lt;li>Google アナリティクスでデータが収集、処理される仕組みについて開示すること&lt;/li>
&lt;/ul>
&lt;p>これらを盛り込んだ記事を Hugo で作成し、リンクをフッターに配置することにします。&lt;/p>
&lt;h3 id="ファイルの作成">ファイルの作成&lt;/h3>
&lt;p>プライバシーポリシーの記事ファイルを作成します。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">hugo new info/privacy.md
&lt;/code>&lt;/pre>&lt;/div>&lt;p>内容を編集します。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-md" data-lang="md">&lt;span style="color:#75715e">&amp;lt;!-- content/info/privacy.md --&amp;gt;&lt;/span>
---
title: &amp;#34;プライバシーポリシー&amp;#34;
date: 2020-10-31T14:38:12+09:00
draft: false
---
&lt;span style="color:#75715e">## アクセス解析ツールについて
&lt;/span>&lt;span style="color:#75715e">&lt;/span>
当サイトでは、アクセス解析のために「Google アナリティクス」を使用しています。
データは Cookie を用いて収集されます。
Google アナリティクスでデータが収集・処理される仕組みの詳細については以下のリンク先を参照ください。
&lt;span style="color:#66d9ef">-&lt;/span> [&lt;span style="color:#f92672">ユーザーが Google パートナーのサイトやアプリを使用する際の Google によるデータ使用&lt;/span>](&lt;span style="color:#a6e22e">https://policies.google.com/technologies/partner-sites?hl=ja&lt;/span>)
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="リンクの設置">リンクの設置&lt;/h3>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#75715e"># config.yaml&lt;/span>
&lt;span style="color:#f92672">menu&lt;/span>:
&lt;span style="color:#f92672">footer&lt;/span>:
- &lt;span style="color:#f92672">identifier&lt;/span>: &lt;span style="color:#ae81ff">privacy&lt;/span>
&lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">プライバシーポリシー&lt;/span>
&lt;span style="color:#f92672">title&lt;/span>: &lt;span style="color:#ae81ff">プライバシーポリシー&lt;/span>
&lt;span style="color:#f92672">url&lt;/span>: &lt;span style="color:#ae81ff">/info/privacy/&lt;/span>
&lt;span style="color:#f92672">weight&lt;/span>: &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="確認-3">確認&lt;/h3>
&lt;p>ローカルサーバーを起動して確認します。&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">hugo server -D
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="デプロイ-1">デプロイ&lt;/h3>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-sh" data-lang="sh">HUGO_ENV&lt;span style="color:#f92672">=&lt;/span>production hugo --minify
git add .
git commit -m &lt;span style="color:#e6db74">&amp;#34;add: privacy&amp;#34;&lt;/span>
git push
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>プライバシーポリシー</title><link>https://rema424.github.io/remalab/info/privacy/</link><pubDate>Sat, 31 Oct 2020 14:38:12 +0900</pubDate><guid>https://rema424.github.io/remalab/info/privacy/</guid><description>&lt;h2 id="アクセス解析ツールについて">アクセス解析ツールについて&lt;/h2>
&lt;p>当サイトでは、アクセス解析のために「Google アナリティクス」を使用しています。&lt;/p>
&lt;p>データは Cookie を用いて収集されます。&lt;/p>
&lt;p>Google アナリティクスでデータが収集・処理される仕組みのについては以下のリンクをご参照ください。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://policies.google.com/technologies/partner-sites?hl=ja">ユーザーが Google パートナーのサイトやアプリを使用する際の Google によるデータ使用&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>